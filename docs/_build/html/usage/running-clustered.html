
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Running (Clustered) &#8212; pytranscoder 2.2.5 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Using includes" href="includes.html" />
    <link rel="prev" title="Running (Local)" href="running-local.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="running-clustered">
<h1>Running (Clustered)<a class="headerlink" href="#running-clustered" title="Permalink to this heading">¶</a></h1>
<p>If you’re here you are brave.  It means you’ve configured multiple hosts and tested them for <em>ssh</em> access from your <em>cluster manager</em> machine.</p>
<p>If you haven’t already guessed, pytranscoder runs encodes on other hosts using <em>ssh</em> to “log-in” to that machine and run <em>ffmpeg</em>. This is
fairly straightforward on Linux and MacOS but a bit of a pain under Windows, as you know if you’ve read the Windows Clustering setup.
Still, it does work well and I use it regularly across multiple Linux and Windows 10 hosts.</p>
<p>So really you can use any machine reachable with <em>ssh</em>, even outside your own network. Securing that connection with VPN or <em>ssh</em> certificates is
a good idea though. Maybe setup a transcoding “co-op” with friends who have beefy rigs and fast internet using the <em>streaming</em> host type.</p>
<p>In my home network I have 2 Ubuntu boxes each with decent nVidia cards and a Windows 10 box also with a good nVidia card.
I push 2 jobs each - that’s 6 videos encoding at once using GPUs.  It’s beautiful watching the scrolling
progress indicators showing so much work being done on those 3 machines. I’ve seen a whole season of 12 50-minute HD videos transcoded in 14 minutes.</p>
<p>The best part is you just set and forget.  When you fire up a job it will use whatever machines in the defined cluster are awake and responsive.
Of course, you don’t always want to dominate every machine in your household. You may set some to just do single encodes at a time (non-concurrent)
as to not impact whoever else is using the machine. How you configure your cluster is in your hands.</p>
<section id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this heading">¶</a></h2>
<dl>
<dt>Encode everything in your default queue file on cluster “home”:</dt><dd><p><cite>pytranscoder -c home</cite></p>
<p>If you configured a <em>default_queue_file</em> in your Global config section, it will be opened and read for a list of files to process.
Each file that is successfully encoded will be removed from that file.  Files are distributed across the cluster hosts based on profiles
and queues.</p>
</dd>
<dt>Encode some files on a specific host in the cluster:</dt><dd><p><cite>pytranscoder -c home –host workstation /downloads/*.mp4</cite></p>
<p>All other cluster hosts will be ignored and encodes sent only to host <em>workstation</em>.</p>
</dd>
<dt>Encode files across 2 clusters:</dt><dd><p><cite>pytranscoder -c home /downloads/series.s01*mp4 -c work /downloads/series.s02*mp4</cite></p>
</dd>
<dt>You can also use –dry-run with a cluster:</dt><dd><p><cite>pytranscoder -c home –dry-run /media/*.mp4</cite></p>
<p>This will show all work to be done and perform a reachability test on each host</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There is a small gotcha in cluster mode. If you <strong>Ctrl-C</strong> to kill pytranscoder the <em>ffmpeg</em> jobs running on the other hosts will
continue to run. A solution is being pursued.</p>
</div>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">pytranscoder</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../configuration/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration/quickstart.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration/configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration/concurrency.html">Concurrency</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration/cluster.html">Cluster Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration/cluster.html#ssh">SSH</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration/cluster.html#pytranscoder-agent">Pytranscoder Agent</a></li>
<li class="toctree-l1"><a class="reference internal" href="running-local.html">Running (Local)</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Running (Clustered)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="includes.html">Using includes</a></li>
<li class="toctree-l1"><a class="reference internal" href="mixins.html">Using Mixins</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="running-local.html" title="previous chapter">Running (Local)</a></li>
      <li>Next: <a href="includes.html" title="next chapter">Using includes</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019-2023, Marshall L Smith Jr.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 6.1.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../_sources/usage/running-clustered.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>